<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="/static/style.css" type="text/css">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="UTF-8">
    <title>Accounting - New Category</title>
</head>
<body>
<!--THIS ALL IS FOR THE TOP MENU-->
    <div class="topnav" id="myTopnav">
        <a id="menulink" href="{{ url_for('home_page.home') }}">Main Menu</a>
        <a id="cuentaslink" href="{{ url_for('accounting.accounting_menu') }}" class="active">Incomes & Expenses</a>
        <a id="haberlink" href="{{ url_for('assets.assets_menu') }}">Assets</a>
        <a id="logoutlink" href="{{ url_for('login_page.logout') }}">Log out</a>

        <a href="javascript:void(0);" class="icon" onclick="myFunction()">
            <img alt="Image dropdown list" src="/static/image/dropdown.png" style="margin:0; display:block;">
            <i class="fa fa-bars"></i>
        </a>
    </div>

    <script>
        function myFunction() {
          var x = document.getElementById("myTopnav");
          if (x.className === "topnav") {
            x.className += " responsive";
          } else {
            x.className = "topnav";
          }
        }
    </script>

    <!--accounting_category_manager this comment is to check that it is reached on test-->
    <center>
        <img alt="My Logo" src="/static/image/logo.png" class="mylogo">
    </center>
    <div class="new-entry">
        <div class="login-screen">
            <div class="app-title">
                <h1>Category</h1>
            </div>
            <div class="login-form">
                <form action="" method="POST" novalidate>
                    <div class="control-group">
                        {{ form.hidden_tag() }}
                        {{ form.to_delete(class="custom-select", id="To_Delete") }}
                        <br>
                        {% for error in form.to_delete.errors %}
                        <span style="color: red;">{{ error }}</span>
                        {% endfor %}
                    </div>
                    <div class="control-group-hidden" id="new_category">
                        {{ form.new_category(placeholder='New Category', type='text') }}
                        <br>
                        {% for error in form.new_category.errors %}
                        <span style="color: red;">{{ error }}</span>
                        {% endfor %}
                    </div>
                    <div class="control-group-hidden" id="category">
                        {{ form.category(class="custom-select") }}
                        <br>
                        {% for error in form.category.errors %}
                        <span style="color: red;">{{ error }}</span>
                        {% endfor %}
                    </div>
                    <div class="control-group-hidden" id="my_submit_div">
                        <input type="submit" id="my_submit" value="Submit new Category" class="btn btn-primary btn-large btn-block">
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>
        var del = document.getElementById("To_Delete");
        del.onchange = function() {
          var cat = document.getElementById("category");
          var newCat = document.getElementById("new_category");
          var mySubmitDiv = document.getElementById("my_submit_div");
          var mySubmit = document.getElementById("my_submit");

          if (del.options[del.selectedIndex].value === "1") {
            if (cat.classList.contains("control-group-hidden")) {
              cat.classList.remove("control-group-hidden")
              cat.classList.add("control-group")
            }
            if (newCat.classList.contains("control-group")) {
              newCat.classList.remove("control-group")
              newCat.classList.add("control-group-hidden")
            }
            if (mySubmitDiv.classList.contains("control-group-hidden")) {
              mySubmitDiv.classList.remove("control-group-hidden")
              mySubmitDiv.classList.add("control-group")
            }
            mySubmit.value = "Delete Category"
          } else if (del.options[del.selectedIndex].value === "0") {
            if (cat.classList.contains("control-group")) {
              cat.classList.remove("control-group")
              cat.classList.add("control-group-hidden")
            }
            if (newCat.classList.contains("control-group-hidden")) {
              newCat.classList.remove("control-group-hidden")
              newCat.classList.add("control-group")
            }
            if (mySubmitDiv.classList.contains("control-group-hidden")) {
              mySubmitDiv.classList.remove("control-group-hidden")
              mySubmitDiv.classList.add("control-group")
            }
            mySubmit.value = "Submit New Category"
          } else {
            if (cat.classList.contains("control-group")) {
              cat.classList.remove("control-group")
              cat.classList.add("control-group-hidden")
            }
            if (newCat.classList.contains("control-group")) {
              newCat.classList.remove("control-group")
              newCat.classList.add("control-group-hidden")
            }
            if (mySubmitDiv.classList.contains("control-group")) {
              mySubmitDiv.classList.remove("control-group")
              mySubmitDiv.classList.add("control-group-hidden")
            }
          }
        }
    </script>
</body>
</html>